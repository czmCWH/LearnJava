# 一、微服务拆分原则

## 1、什么时候拆分?
* 创业型项目：先采用单体架构，快速开发，快速试错。随着规模扩大，逐渐拆分。
* 确定的大型项目：资金充足，目标明确大型项目，可以直接选择微服务架构，避免后续拆分的麻烦。

## 2、怎么拆分？
从拆分目标来说，要做到:
高内聚：每个微服务的职责要尽量单一，包含的业务相互关联度高、完整度高。
低耦合：每个微服务的功能要相对独立，尽量减少对其它微服务的依赖。

- 从拆分方式来说，一般包含两种方式:
  - 纵向拆分：按照业务模块来拆分；
  - 横向拆分：抽取公共服务，提高复用性；


# 二、微服务工程结构

## 1、独立Project
即每一个微服务都是独立的 `Project`，对应到 IDEA 中是独立的窗口，磁盘中存储是独立的目录，对应着独立的git仓库。完全分开没有关联，耦合度可以降到最低。

- 一般在物理磁盘上创建一个文件夹，并把每个 独立Project 放到这个文件夹下。 
- 适用于特别大型的项目，比如淘宝。如果中小型项目会增加管理负担。

## 2、Maven 聚合
即所有业务模块在同一个 `Project` 内，每个微服务对应着一个 `Module`，使用 `Maven` 聚合工程方式管理，并且每一个微服务 `Module` 可以打包部署。

- 即每个微服务 `Module` 在运行时独立分开，只不过是代码放在一起，方便管理。
- 适用于中小型项目。

 
# 三、案例 - HM商城 拆分服务
## 需求1
1. 将 hm-service 中与商品管理相关功能拆分到一个微服务 module 中，命名为 item-service；
2. 将 hm-service 中与购物车有关的功能拆分到一个微服务 module 中，命名为 cart-service；

在父工程的基础上创建为微服务，（父工程依赖都配置好了；项目文件拷贝方便；微服务需要依赖 hm-common;）,
