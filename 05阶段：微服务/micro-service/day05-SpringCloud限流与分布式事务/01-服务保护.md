# 一、雪崩问题
微服务调用链路中某个服务故障（处理请求阻塞 或 处理速度非常慢），引起整个链路中的所有微服务都不可用，这就是雪崩。

- 雪崩问题产生的原因是什么？
  1. 微服务相互调用，服务提供者出现故障或阻塞；
  2. 服务调用者没有做好异常处理，导致自身故障；
  3. 调用链中的所有服务级联失败，导致整个集群故障；

- 解决雪崩问题的思路有哪些？
  1. 服务提供者尽量避免服务出现故障或阻塞。
      保证代码的健壮性；
      保证网络畅通；
      能应对较高的并发请求；
  2. 服务调用者要隔离被调用服务故障，避免故障传递，导致服务级联失败。

> 解决雪崩问题的解决方案，也叫服务保护方案。

## 服务保护方案
1. 请求限流：限制访问微服务的请求的并发量，避免服务因流量激增出现故障。-> 保护服务提供者
2. 线程隔离：也叫做舱壁模式，模拟船舱隔板的防水原理。通过在 服务调用者 中限定每个业务能使用的线程数量而将故障业务隔离，避免故障扩散。-> 保护服务调用者
3. 服务熔断：由 断路器 统计 请求的异常比例 或 慢调用比例，如果超出 阈值 则会 熔断该业务，则拦截该接口的请求。熔断期间，所有请求快速失败，全都走 fallback 逻辑。-> 保护服务调用者
   - 失败处理：定义 fallback 逻辑，让业务失败时不再抛出异常，而是返回默认数据或友好提示。

## 服务保护技术（常用的2种）
* `Sentinel`
* `Hystrix`

> 具体介绍见：`/img/01-常见的服务保护技术.jpg`
