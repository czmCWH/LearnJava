# 一、员工职位人数统计
需求：统计员工信息表，有多少种职位，每种职位对应的人数。
请求响应：

* 基本sql实现
查询员工表根据 job 职位分组，返回职位信息 和 对应的记录数：
```sql
select job, count(*) from emp group by job;
```
查询结果格式如下所示：
```
    job  count(*)
     1     5
     2     1
     3     10
```

* 由于 job 字段的值是一个状态值 int 类型，无法直观的描述信息，那么该如何对查询结果做处理？

## Mysql 流程控制函数 - case 函数 ⚠️⚠️⚠️
case 函数语法：
```sql
-- 语法1: 
case when 表达式1 then result1 when 表达式2 then result2 ... else ... end

-- 语法2: 存在局限性，适用于等值匹配
case 表达式 when val1 then result1 when val2 then result2 ... else ... end 
```

查询结果转换处理：
```sql
-- 方式1:
select 
    (case job when 1 then '班主任' 
        when 2 then '讲师' 
        when 3 then '学工主管' 
        when 4 then '教研主管' 
        when 5 then '咨询师' 
        else '其他' end) pos,
    count(*) num
from emp 
group by job
order by num;

-- 方式2:
select
    (case when job=1 then '班主任'
          when job=2 then '讲师'
          when job=3 then '学工主管'
          when job=4 then '教研主管'
          when job=5 then '咨询师'
          else '其他' end) pos,
    count(*) num
from emp
group by job
order by num;
```

查询结果格式如下所示：
```
   pos        num
  班主任        5
   讲师         1
  学工主管      10
```


# 二、员工性别统计
需求：统计员工信息表中男女各自的人数。
请求响应：
```json
{
  "code": 1,
  "msg": "success",
  "data": [
    {"name":  "男性员工", "value":  5},
    {"name":  "女性员工", "value":  10}
  ]
}
```
基本sql 实现：
```sql
select gender, count(*) from emp group by gender;
```
查询结果：
```
    gender      count(*)
     1            28
     2             3
```

## Mysql 流程控制函数 - if 函数  ⚠️⚠️⚠️
语法： 
```sql
-- if 函数，如果条件表达式成立，取 true_value，否则取 false_value
if(条件, true_value, false_value)
    
-- ifnull 函数，如果条件不为 null，取自身，否则取 val1
ifnull(条件, val1)
```

sql 语句改造：
```sql
select if(gender = 1, '男性员工', '女性员工') name, count(*) value 
    from emp group by gender;
```
查询结果：
```
    name        value
   男性员工        28
   女性员工         3
```

