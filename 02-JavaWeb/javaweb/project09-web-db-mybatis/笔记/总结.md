MyBatis 
  - 引入 Mybatis、Mysql Driver 依赖；
  - 项目核心配置文件中配置数据库连接信息、日志输出、数据库连接池、开启自动驼峰结果映射；
  - Mapper 层书写sql语句；

Mapper 层
  - 需使用 @Mapper 标记接口，接口方法中声明sql语句；
  - 基于注解开发常用注解：
        @Insert("insert into ...") 增
        @Delete("delete from ...") 删
        @Update("update dept set ...") 改
        @Select("select * from ...") 查
  - @MapperScan("com.czm.mapper")，注解启动类，用于避免在每个 Mapper 都需添加 @Mapper 注解
  - 基于XML开发
  - 在 sql语句使用：#{}与${} 引入参数
    - #{}是预编译处理；
    - ${}是字符串替换；
  - Mybatis 主键返回
    - `@Options(useGeneratedKeys = true, keyProperty = "id") `


# MyBatis 基于注解开发

## 在 SQL 语句中引用方法形参：
```java
// 1、@Param 注解 引入多个形参
@Select("SELECT * FROM user WHERE id = #{userId} AND status = #{status}")
User findByIdAndStatus(@Param("userId") Long id, @Param("status") Integer status);

// 2、单个形参：可省略 @Param，直接用 #{param1} 或 #{0}
@Select("SELECT * FROM user WHERE id = #{id}")
User findById(Long id);

// 3、当形参数是一个DTO对象时，可以直接在 SQL 中使用其属性名。
@Select("SELECT * FROM user WHERE name LIKE #{name} AND age = #{age}")
List<User> findByCondition(UserQuery query);
```

```java 
// 4、多个形参 + POJO 混合时，
@Update("UPDATE user SET name = #{user.name}, department_id = #{deptId} WHERE id = #{userId}")
int updateUser(
        @Param("userId") Long userId,
        @Param("user") User user,
        @Param("deptId") Long deptId
);

// 5、使用集合类型的形参，
// ${ids} 会被 MyBatis 自动展开为 1,2,3，${} 有 SQL 注入风险，仅用于 IN、ORDER BY 等无法使用 #{} 的场景。
// ⚠️，此场景一般使用基于XML的动态sql实现
@Delete("DELETE FROM user WHERE id IN (${ids})")
int deleteByIds(@Param("ids") List<Long> ids);
```

## 结果解析
如果字段名和属性名完全一致（或开启了自动驼峰映射），可以省略 @Results，MyBatis 会自动映射。
当数据库字段名与 Java 对象属性名不一致时，需：@Results进行手动结果映射 或者 给取别名
```java
@Select("SELECT user_id, user_name, create_time FROM users")
@Results({
    @Result(id = true, column = "user_id", property = "userId"),    // id = true 表示该字段是主键，有助于 MyBatis 提升性能（如去重）。
    @Result(column = "user_name", property = "userName"),
    @Result(column = "create_time", property = "createTime")
})
List<User> findAllUsers();
```

# MyBatis 基于XML开发

## <select> 标签