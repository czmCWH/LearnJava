# 一、日志技术
程序中的日志，是用来记录应用程序的运行信息、状态信息、错误信息等。

通过 `System.out.printlin("")` 把日志输出到控制台，存在许多弊端：
* 硬编码，无法控制是否输出；
* 只能输出到控制台；
* 不便于扩张、维护；  

## 常用的日志框架：

1、`JUL(Java.util.logging)`：`JavaSE` 平台提供的官方日志框架，也被称为 JUL，配置相对简单，但不够灵活，性能较差。

2、`Log4j`（罗哥佛街）：一个流行的日志框架，提供了灵活的配置选项，支持多种输出目标（如：控制台、日志文件、数据库）。它是 `Slf4j` 的实现。

3、`Logback`：基于 Log4j 升级而来，提供了更多的功能和配置选项，性能优于 `Log4j`。

`Slf4j`(`Simple Logging Facade for Java`)：简单日志接口规范，提供了一套日志操作的标准接口及抽象类，允许应用程序使用不同的底层日志框架。如：Log4j、Logback 框架是 Slf4j 的实现。 

# 二、Logback 入门
* 步骤1、准备工作：引入 `logback` 的依赖、配置文件 `logback.xml`。

⚠️ 在 springboot 项目中无需引入 logback，因为 springboot 项目有默认的 logback 依赖。

```xml
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
</dependency>
```

* 步骤2、记录日志：定义日志记录器 `Logger`，打印记录日志。

> ⚠️ @slf4j 注解
>   它是 lombok 依赖提供的，用于修饰类；
>   使用此注解的类中会自动生成: private final Logger log = LoggerFactory.getLogger(LogTest.class);
>   可以简化日志记录器的使用。

```java
// @slf4j 
public class LogTest {
    // Logger：日志记录对象
    // getLogger(name = 日志记录器的名字)、 getLogger(Class = 记录那个类中的日志)
    private final Logger log = LoggerFactory.getLogger(LogTest.class);

    @Test
    public void testLog() {
        log.info("开始计算...");
        int sum = 0;
        try {
            int[] nums = {1,2,3,4,5,6,7,8,9};
            for (int i = 0; i < nums.length; i++) {
                sum += nums[i];
            }
        } catch (Exception e) {
            log.info("程序出错！");
        }
        log.info("计算结果 sum = " + sum);
        // 占位符的方式输出
        log.info("计算结果 sum = {}", + sum);   // 占位符的方式
        log.info("结束计算。");
    }
}
```

# 三、logback.xml 配置文件
`Logback` 的配置文件 `logback.xml` 是对 `Logback` 日志框架输出的日志进行控制的，用来配置输出的格式、位置 及 日志开关等。
`Logback` 配置文件在 `src/main/resources` 目录下。

## 3.1、配置日志输出位置
项目开发中使用 Logback 将日志输出到数据库是一个比较耗时，比较耗费性能的操作，通常只是输出到 控制台、系统文件中。

```xml
<!--  配置日志输出到控制台  -->
<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
...
</appender>

<!--  配置日志输出到系统文件  -->
<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
<!--...-->
</appender>
```


## 3.2、Logger 对象的日志级别

```xml
<!--
level：用于指定日志输出级别，取值如下（单词大小写都支持）：
    OFF：关闭日志，所有级别日志都不会输出；
    ALL：所有级别日志都可以输出；
    trace、debug、info、warn、error 等；
-->
<root level="ALL">
    <!--
     ref="STDOUT"，表示引用 <appender name="STDOUT" ...> 的配置
     ref="FILE"，表示引用 <appender name="FILE" ...> 的配置
     ⚠️ 如果不需要输出到某个位置，可以直接删除对应的 <appender-ref ...>
    -->
    <appender-ref ref="STDOUT" />
    <appender-ref ref="FILE" />
</root>
```

日志级别指的是日志信息的类型，日志都会分级别，常见的日志级别如下：
优先级由低到高，即 `trace最低  < error最高`。

* `trace`：追踪，记录程序运行轨迹 【使用很少】，`log.trace("...")`

* `debug`：调试，记录程序调试过程中的信息，实际应用中一般将其视为最低级别 【使用较多】，`log.debug("...")`

* `info`：记录程序运行的重要信息，关键节点信息，如：数据库连接、网络连接、io操作 【使用较多】，`log.info("...")`

* `warn`：警告信息，可能会发生问题 【使用较多】，`log.warn("...")`

* `error`：错误信息、【使用较多】，`log.error("...")`

> ⚠️，项目开发中终端的日志信息可能会非常多，这可能是日志级别太低导致的，项目开发中通常使用 debug、info 级别。


# IDEA 控制台插件 - Grep Console