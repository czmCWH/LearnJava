# 一、测试
测试：是一种用来促进鉴定软件的正确性、完整性、安全性和质量的过程。

## 1、测试阶段划分：

### a、单元测试
    对软件的基本组成单位(方法)进行测试，最小测试单位。
    目的：检验软件基本组成单位的正确性。
    测试人员：开发人员。

### b、集成测试
    将已分别通过测试的单元，按设计要求组合成系统或子系统，再进行的测试。
    目的：检查单元之间的协作是否正确。
    测试人员：开发人员。

### c、系统测试（sit）
    对已经集成好的完整软件系统进行彻底的测试。
    目的：验证软件系统的正确性、性能是否满足指定的要求。
    测试人员：测试人员

### d、验收测试（uat）
    交付测试，是针对用户需求、业务流程进行的正式的测试。
    目的：验证软件系统是否满足验收标准。
    测试人员：客户/需求方

## 2、测试方法

### a、白盒测试
    清楚软件内部结构、代码逻辑。
    用于验证代码、逻辑正确性。

### b、黑盒测试
	不清楚软件内部结构、代码逻辑。
	用于验证软件的功能、兼容性、验收测试等方面。

### c、灰盒测试
	结合了白盒测试和黑盒测试的特点，既关注软件的内部结构又考虑外部表现(功能)

# 二、JUnit 框架单元测试
单元测试 是针对最小的功能单元(方法)，编写测试代码对其正确性进行测试。
JUnit 是最流行的 Java 测试框架之一，提供了一些功能，方便程序进行单元测试(第三方公司提供)。

1. 在 Main 方法中直接测试的缺点：
    1、测试代码与源代码未分开，难维护；
    2、一个方法测试失败，影响后面方法；
    3、无法自动化测试，得到测试报告；

2. 使用 JUnit 框架单元测试的优点：
    1、测试代码与源代码分开，便于维护；测试代码写在 `test/java/` 里面，不会影响到 `main/`。
    2、可根据需要进行自动化测试；如：点一下 测试类的 运行，里面的方法都会运行，即使前面的测试方法失败，后面的测试方法也会执行。
    3、可自动分析测试结果，产出测试报告；

## 1、Maven 项目中引入 JUnit 框架进行单元测试的步骤

1、在 `pom.xml` 中，引入 JUnit 依赖

```xml
 <dependency>
    <groupId>org.junit.jupiter</groupId>
    <artifactId>junit-jupiter</artifactId>
    <version>5.11.1</version>
    <scope>test</scope>
</dependency>
```

2、在 `test/java/` 目录下，创建测试类，并编写对应的测试方法，并在方法上声明 `@Test` 注解。

> 注意：【规范】
> JUnit 单元测试类名命名规范为: XxxxxTest； 
> JUnit 单元测试的方法命名规范为：testXxx，另外测试方法必须声明为 public void（【规定】）；

3、运行单元测试（测试通过：绿色；测试失败：红色）。


## 2、在 Junit 常用注解：

@Test：测试类中的方法用它修饰才能成为测试方法，才能启动执行。 --- 用于单元测试

@BeforeEach：用来修饰一个实例方法，该方法会在每一个测试方法执行之前执行一次。 --- 初始化资源(准备工作)

@AfterEach：用来修饰一个实例方法，该方法会在每一个测试方法执行之后执行一次。 --- 释放资源( 清理工作)

@BeforeAll：用来修饰一个静态方法，该方法会在所有测试方法之前 只 执行一次。 --- 初始化资源(准备工作)

@AfterAll：用来修饰一个静态方法，该方法会在所有测试方法之后只执行一次。 --- 释放资源( 清理工作)

@ParameterizedTest：参数化测试的注解 (可以让单个测试运行多次，每次运行时仅参数不同) --- 用了该注解，就不需要@Test注解了
    如：
        @ParameterizedTest + @ValueSource
        @ParameterizedTest + @CsvSource

@ValueSource：参数化测试的参数来源，赋予测试方法参数 --- 与参数化测试注解配合使用

@DisplayName：指定测试类、测试方法显示的名称 (默认为类名、方法名)

`@SpringBootTest`：用于修饰测试类，表示一个 SpringBoot 单元测试类


## 3、JUnit 中的断言
问题：单元测试运行不报错(绿色)，就代表代码没问题，测试通过?
分析：
 并不是，只能说测试方法执行没有问题，并不代表被测试的业务方法的逻辑就没有问题。 
 通过 junit 断言 可以检测方法运行结果是否和预期一致，从而判断业务方法的正确性。前提是开发者对业务非常清楚。

JUnit 提供了一些辅助方法，用来帮我们确定被测试的方法 是否按照预期的效果 正常工作，这种方式称为断言。Assertions 工具类提供的方法如下：

    assertEquals，检查两个值是否相等，不相等就报错 
    
    assertNotEquals，检查两个值是否不相等，相等就报错。
    
    assertNull，检查对象是否为null，不为null，就报错。
    
    assertNotNull，检查对象是否不为null，为null，就报错
    
    assertTrue，检查条件是否为true，不为true，就报错。
    
    assertFalse，检查条件是否为false，不为false，就报错。
    
    assertSame，检查两个对象引用是否相等，不相等，就报错。

    assertThrows，检查程序运行抛出的异常，是否符合预期。

三、单元测试 - 企业开发规范
原则：编写测试方法时，要尽可能的覆盖业务方法中所有可能的情况（尤其是边界值）。

编写单元测试时，我们要尽可能覆盖到业务方法所有可能出现的情况，那么如何判断是否都覆盖到了？
需要借助 IDEA 中单元测试代码覆盖率来做判定！