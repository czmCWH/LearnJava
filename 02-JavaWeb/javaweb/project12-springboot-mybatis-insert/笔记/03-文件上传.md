# 一、本地文件上传
文件上传：是指将本地图片、视频、音频等文件上传到服务器，供其他用户浏览或下载的过程。
本地存储：在服务端，接收到上传上来的文件之后，将文件存储在本地服务器磁盘中。



# 二、文件上传 - 本地存储
案例：从前端页面中选择文件，基于 form 表单上传，以 post 请求的方式传递给服务端。服务端接收文件后，并存储到本地服务器磁盘中。
实现步骤：
- 步骤1：准备前端页面，代码实现 `src/main/resources/static/upload.html`
  - 本案例采用前后端混合开发，前端页面放在服务端工程内； 
  - 前端页面 `upload.html` 中需注意文件上传页面3要素；

- 步骤2：服务端处理上传文件，在 Controller 层接收 form 表单参数：⚠️
  ```java
  @PostMapping("/upload")
  Result upload(String username, Integer age, MultipartFile file) throws IOException {
        log.info("--- 本地文件上传参数 = {}, {}, {}", username, age, file);
  }
  ```
- 步骤3：运行项目测试，启动 SpringBoot 项目通过 `http://localhost:8080/upload.html` 访问前端页面，具体逻辑查看 `UploadController.java`。


## MultipartFile 类型常用方法
MultipartFile 用于接收前端上传的文件：
```
getOriginalFilename()：获取原始文件名
transferTo(File dest)：将接收到的文件转存到磁盘文件中。
getOriginalFilename()：获取原始文件名。
getsize()：获取文件的大小，单位:字节。
getBytes()：获取文件内容的字节数组。
getInputstream()：获取接收到的文件内容的输入流
```

## SpringBoot 工程文件上传配置
```properties
# SpringBoot 工程文件上传配置，直接输入：multipart 配置
# 最大单个文件的上传大小为 10 MB，默认为1MB
spring.servlet.multipart.max-file-size=10MB
# 配置单次请求最大上传大小（即，一次请求中的所有文件和表单数据总大小）
spring.servlet.multipart.max-request-size=100MB
```


# 二、文件上传 - 阿里云OSS 存储 
- 服务器的本地磁盘存储上传文件存在的问题：
  1. 无法直接访问，读文件的时候需要通过 IO 流，然后才能访问；
  2. 磁盘容易爆满；
  3. 磁盘损坏，导致文件损失；

- 解决办法：
  - 方案1、使用 FastDFS 或 MinIO 技术自己搭建一个文件存储服务；
  - 方案2、第三方提供的云服务存储上传的文件；比如：阿里云。

## 阿里云
阿里云是阿里巴巴集团旗下全球领先的云计算公司，是国内最大的云服务提供商，也是全球第四大云服务提供商。

阿里云对象存储 0SS (`0bject Storage Service`)，是一款海量、安全、低成本、高可靠的云存储服务。
使用 `OSS` 您可以通过网络随时存储和调用包括文本、图片、音频和视频等在内的各种文件。

* `Bucket`: 是用户用于存储对象(`0bject`，就是文件)的容器（即，存储空间），所有的对象都必须隶属于某个存储空间。
* `AccessKey（ID、Secret）`：是指阿里云账号的身份凭证。
* `SDK`：`Software Development Kit` 的缩写，软件开发工具包，包括辅助软件开发的依赖(jar包)、代码示例等，都可以叫做SDK。

1、Bucket 名称：全网唯一
2、地域：一般用深圳和杭州，服务器远近的位置

## 阿里云OSS 文件上传入门
代码实现：`src/test/Demo`；
案例实现流程：文件上传流程：前端提交 -> Java 服务器接收 -> 传递给 阿里云OSS，代码实现：`UploadController.java`；
Java端实现 OSS 上传具体参考 SDK 文档；

