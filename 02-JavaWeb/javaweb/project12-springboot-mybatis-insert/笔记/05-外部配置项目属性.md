# 一、外部配置项目属性
SpringBoot项目除了支持配置文件属性配置（即，`.properties、.yaml、.yml`），还支持 `Java 系统属性` 和 `命令行参数` 的方式进行项目属性配置。
即不用修改 SpringBoot 项目中的任何配置，可以通过这2种方式修改项目的属性配置。

- Java 系统属性(`VM options`)语法：
    ```
    # -D属性名=属性值
    -Dserver.port=9000
    ```

- 命令行参数(`Program arguments`)语法：
    ```
    ## --属性名=属性值
    --server.port=10010
    ```

- 应用场景：
    运行其它项目时，在不修改项目前提下，通过外部配置项目属性来指定为自己的配置，如：自己的数据库用户名和密码等。

> ⚠️⚠️⚠️ SpringBoot 项目配置属性优先级：命令行参数(Program arguments) > Java 系统属性(VM options) > application.properties

那么如何使用这2种方式配置项目属性？

## 1.1、方式1，在 IDEA 中配置
在 IDEA 中通过项目配置面板配置 `Java 系统属性` 和 `命令行参数`，⚠️，此方式只针对在 IDEA 中运行项目时生效！
详细配置步骤见图：`笔记/img/02-IDEA中配置项目属性`。


## 1.2、方式2，运行项目 jar 包时配置
案例：当开发者通过 Maven 打包项目后生成了 `xxx.jar 包`，发给其他人员使用时，而项目中配置端口号在 `xxx.jar 包` 的使用者电脑上被占用。
这时可以通过指定特定端口的指令，运行 `xxx.jar 包`，如下 2 种方式避免端口被占用：

```shell
# 语法：java [Java 系统属性] -jar 项目jar包 [命令行参数]

# 运行项目 jar 包时，指定Java系统属性
$ java -Dserver.port=8866 -jar project12-springboot-mybatis-insert-0.0.1-SNAPSHOT.jar

# 运行项目 jar 包时，指定命令行参数
$ java -jar project12-springboot-mybatis-insert-0.0.1-SNAPSHOT.jar --server.port=8866 
```

### 打包
Springboot项目进行打包时，`pom.xml` 文件中需要引入插件 spring-boot-maven-plugin(基于官网骨架创建项目，会自动添加该插件)，否则打包后的 jar 包无法使用。

````xml
<build>
    <plugins>
    <!-- maven 打包插件，如果缺失，会导致打出来的 jar包，无法运行！！！会提示：jar 中没有主清单属性 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <annotationProcessorPaths>
                    <path>
                        <groupId>org.projectlombok</groupId>
                        <artifactId>lombok</artifactId>
                    </path>
                </annotationProcessorPaths>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <configuration>
                <excludes>
                    <exclude>
                        <groupId>org.projectlombok</groupId>
                        <artifactId>lombok</artifactId>
                    </exclude>
                </excludes>
            </configuration>
        </plugin>
    </plugins>
</build>
````

<https://www.bilibili.com/video/BV1m84y1w7Tb?spm_id_from=333.788.videopod.episodes&vd_source=f97692c2f656607aeb97ee92b4310d9e&p=183>