# 一、SpringBoot 项目配置文件
SpringBoot 项目的配置文件存放在 `src/main/resources` 目录下，文件名都为 `application`，并且提供了多种属性配置方式(如：`.properties、.yaml、.yml`)，
区别在于它们的书写格式。 其中 `yaml、yml` 是一样的，只是文件后缀名不同。

SpringBoot 项目支持同时使用多种格式的配置文件，配置文件优先级： `.properties` > `.yml` > `.yaml`。
在项目开发时，推荐统一使用一种格式的配置，`yml`格式是主流。

## 1.1、`application.properties` 配置文件：
- 参数配置格式：
  - 配置参数时，直接在 = 后面写值，不需要给值加引号；
- 特点：臃肿、层级结构不清晰

```properties
# 阿里云OSS配置信息
aliyun.oss.bucket=zm-java
aliyun.oss.endpoint=http://oss-cn-hangzhou.aliyuncs.com
```

## 1.2、`application.yml` 配置文件：
- yml配置文件格式：
  1. 数值前边必须有一个空格，作为分隔符；
  2. 使用缩进表示层级关系。缩进时，不建议使用Tab键，只能用空格(idea中会自动将Tab转换为空格)；
  3. 缩进的空格数目不重要（建议2个空格），只要相同层级的元素左侧对齐即可；
  4. `#` 表示注释，从这个字符一直到行尾，都会被解析器忽略；
- 特点：
  - 简洁、数据为中心（企业中常用）

```yml
# 1、yml 定义对象/Map集合
user:
  name: zhangsan
  age: 18
  password: '0123'

# 2、yml 中定义数组/List/Set集合
hobby:
  - ball  
  - game   
```
> 在 yml 格式的配置文件中，如果配置项的值是以 0开头的，值需要使用 `''` 引起来，因为以0开头在yml中表示8进制的数据。



# 二、项目参数配置化 ⚠️
项目参数配置化，是指将一些需要灵活变化的参数，配置在配置文件中（如：application.properties 文件中配置）。

如下配置文件所示，开发中如何获取配置文件中的配置属性值？
```yml
# 配置自定义对象
aliyun:
  oss:
    endpoint: http://oss-cn-hangzhou.aliyuncs.com
    bucket: zm-java
```

项目中有如下2种方方式：

## 2.1、方式1，Spring 的 @Value 注解直接引入配置的属性 
`@Value 注解` 是 Spring 的注解，通常用于外部配置的属性注入，语法：`@Value("${配置文件中的key}")`。

```java
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

@Component
public class AliyunOSSOperator {

  @Value("${aliyun.oss.bucket}")
  private String bucketName;

  @Value("${aliyun.oss.endpoint}")
  private String endpoint;

}
```

## 2.2、方式2，@ConfigurationProperties 获取配置对象
当使用 `@Value` 注解注入配置文件的配置项，如果配置项多，注入繁琐，不便于维护管理 和 复用。
这时，可以使用 `@ConfigurationProperties` 注解获取配置对象。

```java
import lombok.Data;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

/**
 * 配置类，自动获取配置文件中的值
 */
@Data // lombok 生成 get/set 方法
@Component // 交给 IOC 容器管理
@ConfigurationProperties(prefix = "aliyun.oss") // 配置对象
public class AliOSSProperties {
    private String endpoint;
    private String bucket;
}
```

```java
@Autowired  // IOC依赖注入
private AliOSSProperties aliyOSSProperties;
```

## 2.3、总结
- `@Value` 适用于获取少量配置项，一个属性一个属性的注入。
- 如果项目配置的自定义属性较多，考虑复用，建议使用 `@ConfigurationProperties`。








<https://www.bilibili.com/video/BV1m84y1w7Tb?spm_id_from=333.788.videopod.episodes&vd_source=f97692c2f656607aeb97ee92b4310d9e&p=153>
<https://www.bilibili.com/video/BV1yGydYEE3H?spm_id_from=333.788.videopod.episodes&vd_source=f97692c2f656607aeb97ee92b4310d9e&p=73>
<https://www.bilibili.com/video/BV1yGydYEE3H?spm_id_from=333.788.videopod.episodes&vd_source=f97692c2f656607aeb97ee92b4310d9e&p=141>